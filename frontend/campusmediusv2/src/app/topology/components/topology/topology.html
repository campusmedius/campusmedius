<cm-map
    [@mapTopOffset]="mediationState"
    [@mapLeftOffset]="sidepanelState"
    [overlayBottomSize]="!isMobile ? mediationsHeight : mobileOverlayHeight"
    [overlayRightSize]="!isMobile ? sidepanelWidth : '0px'"
    [overlayTopSize]="isMobile ? mediationsHeight : '0px'" >
    <cm-map-mediator *ngFor="let mediator of visibleMediators" [mediator]="mediator" [mediation]="selectedMediation" [lang]="translate.currentLang" [selected]="mediator === selectedMediator">
    </cm-map-mediator>
</cm-map>

<div *ngIf="!isMobile" class="sidepanel" [@sidenav]="sidepanelState">
    <button mat-button class="sidenav-control" (click)="toggleInformationPanel()" *ngIf="sidepanelState !== 'intro'">
        <mat-icon fontSet="fa" fontIcon="fa-caret-right" [@sidenavIcon]="sidepanelState"></mat-icon>
    </button>
    <div class="info-container">

    </div>
</div>

<cm-info-box *ngIf="selectedMediator" [@infoBox]="mediationState"></cm-info-box>

<cm-mediations
    [@mediationsPanel]="sidepanelState"
    [mediations]="mediations"
    [selectedMediation]="selectedMediation || focusedMediation"
    [selectedMediator]="selectedMediator || focusedMediator"
    (height)="mediationsHeight = $event"
    (state)="mediationState = $event"
    (focusedMediation)="focusedMediation = $event"></cm-mediations>

<cm-start-selector
    *ngIf="!selectedMediator"
    [mediators]="mediators.slice(1,16)"
    [mediations]="mediations"
    [overlayBottomSize]="!isMobile ? mediationsHeight : mobileOverlayHeight"
    [overlayRightSize]="!isMobile ? sidepanelWidth : '0px'"
    [lang]="translate.currentLang"
    [selectedMediationId]="focusedMediation ? focusedMediation.id : null"
    (focusedMediation)="focusedMediation = $event"
    (focusedMediator)="focusedMediator = $event"></cm-start-selector>


<cm-god-selector
    *ngIf="atGod"
    [overlayBottomSize]="!isMobile ? mediationsHeight : mobileOverlayHeight"
    [overlayRightSize]="!isMobile ? sidepanelWidth : '0px'"
    [mediators]="mediators.slice(1,16)"></cm-god-selector>
